# SVG - path

## path
path 엘리먼트는 SVG 기본 도형 라이브러리에서 가장 강력한 엘리먼트이다.   
선과 곡선, 호 등 다양한 형태를 그릴 수 있다.

path는 여러 개의 직선과 곡선을 합쳐서 복잡한 도형을 그릴 수 있게 해준다.  
직선으로만 이루어진 복잡한 도형은 polylines로도 그릴 수 있지만 곡선을 묘사할 때  
polylines은 path로 그린 도형에 비해 더 많은 직선이 필요해 확대가 잘 되지 않을 수 있다.  
그렇기에 SVG를 그릴 때 패스에 대해 이해하는 것이 매우 중요.  
path의 모양은 `d 속성` 하나로 정의된다. "d" 속성은 여러 개의 명령어와 그 파라미터들로 이루어 진다.  

각각 명령은 특정 알파벳으로 시작한다. 예를들어 현재 그려지는 위치를 XY좌표계의 (10, 10) 으로  
이동할 때 'Move To'명령을 사용하게 되는데, 이 명령은 알파벳 M으로 호출한다.  

SVG 처리기가 이 문자를 읽게 되면 다른 위치로 이동하라는 명령으로 이해하게 된다.  
즉, (10, 10) 으로 이동하려면 명령어 "M 10 10"을 쓰면 된다.   
이후에 처리기는 다음 명령어를 읽기 시작한다.  

모든 명령어는 2가지 변형이 존재하는데, 알파벳이 `대문자`인경우,  
뒤따르는 좌표는 페이지의 절대좌표를 참조하며,  
`소문자` 알파벳(m)일 경우 마지막 위치에 대한 상대적 좌표로 참조된다.  

"d" 속성의 좌표는 절대 단위가 붙지 않으며, 패스의 위치나 형태가 어떻게 변형될 수 있는지는 나중에 배우도록 한다.

## 선(Line)명령어
path노드에는 다섯개의 선 명령어가 있다.  
이름에서 알 수 있듯이 각각의 명령어는 두 점 사이에 선을 그리는 역할을 한다.  
첫 번째 명령어는 'Move To(이동하기)' 혹은 'M'이다. 이 명령어는 두 개의 파라미터로 x와 y의 좌표를 받는다.  
그리기 커서가 이미 페이지의 다른 곳에 있었더라도 두 점 사이에 점이 그려지지는 않는다.  
'Move To'명령어는 다음과 같이 패스의 맨 처음에 와서 그리기를 시작할 위치를 지정한다.  
- `M x y (혹은 m dx dy)`  

```
<svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">
  <path d="M10 10"/>
  <!-- 점 -->
  <circle cx="10" cy="10" r="2" fill="red"/>
</svg>
```
선을 그리는 명령어는 세 가지가 있다. 가장 일반적인 것은 'L'이라 부르는 "Line To(선 그리기)" 명령어.  
L 명령어에는 x,y라는 두 개의 파라미터를 받아서 현재 위치에서 새 위치로 선을 긋는다.  

- `L x y (혹은 1 dx dy)`


가로선과 세로선을 그리는 축약 명령어도 있다. 'H'는 가로선을 그리고 'V'는 세로선을 그릴 수 있다.  
두 명령어는 한 좌표축으로만 이동하므로 하나의 파라미터만을 받는다.  

- `H x (혹은 h dx)`
- `V y (혹은 v dy)`
```
<svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">
  <path d="M10 10 H 90 V 90 H 10 Z"/>
  <circle cx="10" cy="10" r="2" fill="red"/>
  <circle cx="90" cy="90" r="2" fill="red"/>
  <circle cx="90" cy="10" r="2" fill="red"/>
  <circle cx="10" cy="90" r="2" fill="red"/>
</svg>
// svg전체 위치를 기준으로 선이 그려진다.
```
`Z`라는 "Close Path" 명령어를 통해 쉽게 path를 마무리할 수 있다. 이 명령어는 현 위치에서 시작점으로 직선을 그린다.  
항상은 아니지만 path의 끝에 자주 쓰인다. 대문자와 소문자 사이의 차이는 없음.
- `Z (혹은 z)`

위의 형태를 상대좌표로도 표현해볼 수 있다.  
상대좌표 명령어는 앞서 기술된 바와 같이 소문자로 되어 있는 명령어인데,   
패스를 움직일 때 정확한 위치를 지정해주는 것이 아니라 현재 위치로부터 얼마나 움직여야 하는지를 기술해준다.  
예를 들면 위 80x80 상자를 아래와 같이 표현할 수 있다.
```
<path d="M10 10 h 80 v 80 h -80 Z" fill="transparent" stroke="black"/>
```
여기서 패스는 (10,10)에서 시작하여 수평으로 80포인트만큼 오른쪽으로 움직이고  
수직으로 80포인트만큼 아래로 이동하고 다시 시작점으로 이동하게 된다.

위 예제의 모양을 만드는 데는 `<polygon>` 태그나 `<polyline>` 태그가 더 간편해보일 수 있지만,  
패스는 SVG를 그릴 때 자주 사용되므로 개발자 입장에서 더 편할 수도 있다.  
성능 면에서는 둘 모두 비슷비슷하니, 편한 것으로 사용하자.

## Curve 명령어
부드러운 곡선을 그릴 수 있는 세가지 명령어가 있다. 이 중 2가지는 '베지어 곡선'이며, 나머지 하나는 원의 조각인 '호'

##### 베지어 곡선이란?
`
컴퓨터 그래픽에서 임의의 형태의 곡선을 표현하기 위해 수학적으로 만든 곡선. 최초의 제어점(control point)인 시작점과 최후의 제어점인 끝점 그리고 그 사이에 위치하는 내부 제어점의 이동에 의해 다양한 자유 곡선을 얻는 방법이다. 이 때 곡선은 제어점 위를 통과하는 것은 아니다. 시작점에서 시작한 곡선은 인접한 제어점 방향으로 진행하는데, 그 옆에 있는 제어점의 영향을 받아 첫 제어점 위를 지나가지 않고, 그 다음의 제어점 방향에 영향을 받아 곡선이 작성된다. 이는 각 제어점의 좌표를 매개로 하는 매개 함수식을 통해 만들어지는 것이다. 
`

베지어 곡선의 종류는 무한하지만, 패스 엘리먼트에서는 가장 간단한 두 종류만을 지원.  
하나는 'C'라 부르는 3차(Cubic)베지어 곡선이고, 다른 하나는 'Q'로 사용되는 2차(Quardratic) 베지어 곡선.

```
<svg width="190" height="160" xmlns="http://www.w3.org/2000/svg">

  <path d="M10 10 C 20 20, 40 20, 50 10" stroke="black" fill="transparent"/>
  <path d="M70 10 C 70 20, 120 20, 120 10" stroke="black" fill="transparent"/>
  <path d="M130 10 C 120 20, 180 20, 170 10" stroke="black" fill="transparent"/>
  <path d="M10 60 C 20 80, 40 80, 50 60" stroke="black" fill="transparent"/>
  <path d="M70 60 C 70 80, 110 80, 110 60" stroke="black" fill="transparent"/>
  <path d="M130 60 C 120 80, 180 80, 170 60" stroke="black" fill="transparent"/>
  <path d="M10 110 C 20 140, 40 140, 50 110" stroke="black" fill="transparent"/>
  <path d="M70 110 C 70 140, 110 140, 110 110" stroke="black" fill="transparent"/>
  <path d="M130 110 C 120 140, 180 140, 170 110" stroke="black" fill="transparent"/>

</svg>
```
3차 베지어 곡선인 'C'는 조금 복잡한 곡선이다. 3차 베지어 곡선은 선을 잇는 두 점에 하나씩 제어점을 가지고 있다. 그러므로 3차 베지에 곡선을 그리려면 총 세 개의 좌표가 필요하다.

`
C x1 y1, x2 y2, x y (혹은 c dx1 dy1, dx2 dy2, dx dy)
`

마지막으로 지정된 좌표 (x, y)는 곡선의 끝점이다. 나머지 두 개는 제어점이며, 첫 번째 제어점은 (x1, y1), 두 번째 제어점은 (x2, y2)이다. 제어점은 기본적으로 시작점과 끝점에서 곡선의 방향을 기술한다. 베지어 함수는 각 제어점의 방향을 이용해 부드러운 곡선을 만드는 기능을 한다.

위 예제에서는 아홉 개의 베지어 곡선을 그린다. 왼쪽으로 갈수록 곡선이 수평에 가까워지고, 오른쪽으로 갈수록 제어점이 원점에서 멀어진다. 여기서 주목해야 할 점은 곡선이 첫 번째 제어점 방향으로 시작한 다음, 두 번째 제어점 방향으로 구부러지고 있다는 것.

여러 베지어 곡선을 연결하여 확장된 곡선 형태를 만들 수도 있다. 한 선의 제어점을 다른 선의 제어점과 반대 방향으로 그어서 완만한 경사를 만들어야 할 때가 많은데, 이 경우에는 간단한 형태의 3차 베지어 곡선 명령어인 'S' (혹은 's')를 사용해서 구현할 수 있다.

`
S x2 y2, x y (혹은 s dx2 dy2, dx dy)
`
```
<svg width="190" height="160" xmlns="http://www.w3.org/2000/svg">
  <path d="M10 80 C 40 10, 65 10, 95 80 S 150 150, 180 80" stroke="black" fill="transparent"/>
</svg>
```

3차 베지어 곡선보다 간단한 다른 형태의 곡선은 'Q'라고 부르는 2차 베지어 곡선이며, 하나의 제어점이 시작점과 끝점의 방향을 모두 결정한다. 이 명령어는 매개변수로 제어점과 곡선의 끝점 2개를 받는다.

`
Q x1 y1, x y (혹은 q dx1 dy1, dx dy)
`
```
<svg width="190" height="160" xmlns="http://www.w3.org/2000/svg">
  <path d="M10 80 Q 95 10 180 80" stroke="black" fill="transparent"/>
</svg>
```

3차 베지어 곡선과 같이 2차 베지어 곡선을 연결하는 단축 명령어가 있으며, T라고 부른다.

`
T x y (혹은 t dx dy)
`

이 축약 명령어는 이전에 사용한 제어점으로부터 새로운 제어점을 만들어낸다. 즉, 처음에 제어점 하나만을 기술하면 끝점만을 계속 이어서 꽤 복잡한 도형을 만들 수 있다.

- Q나 T 명령어 다음에 올 때만 적용된다. 그렇지 않을 경우 제어점은 시작점의 좌표로 간주되며, 직선만 그릴 수 있게 된다.

```
<svg width="190" height="160" xmlns="http://www.w3.org/2000/svg">
  <path d="M10 80 Q 52.5 10, 95 80 T 180 80" stroke="black" fill="transparent"/>
</svg>
```

두 종류의 곡선이 비슷한 결과를 만들어내긴 하지만, 3차 곡선의 경우 모양을 더 자유롭게 수정할 수 있다. 둘 중 어느 것이 좋은지는 그때그때 다르며, 선 모양이 얼마나 대칭적인지에 따라 달라진다.

## 원호

SVG로 그릴 수 있는 다른 형태의 곡선으로는 A라고 부르는 호(arc)가 있다. 호는 원이나 타원의 일부분을 말한다. x, y축 반지름이 주어졌을 때, (두 점이 충분히 가깝다고 가정할 때) 두 점을 연결할 수 있는 타원은 2개가 있으며, 각각의 타원에서 두 점을 잇는 경로 또한 2개씩 있기 때문에 어떤 상황에서든 네 종류의 호를 그릴 수 있다. 이러한 성질 때문에 호 명령어는 꽤 많은 파라미터를 받는다:

`
A rx ry x축-회전각 큰-호-플래그 쓸기-방향-플래그 x y
 a rx ry x축-회전각 큰-호-플래그 쓸기-방향-플래그 dx dy
`

A 명령어는 일단 x축, y축 반지름을 매개변수로 받는다. 혹시 필요하다면 ellipse 문서에서 두 매개변수가 어떻게 작동하는지 확인해볼 수 있다. 세 번째 매개변수는 호의 회전각을 기술한다. 